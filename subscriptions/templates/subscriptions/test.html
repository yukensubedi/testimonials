<!DOCTYPE html>
<html>
<head>
    <title>Checkout</title>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <button id="subscribe-btn">Subscribe</button>

    <script>
        document.getElementById('subscribe-btn').addEventListener('click', async () => {
            const response = await fetch('/create-checkout-session/', { method: 'POST' });
            const data = await response.json();
            console.log(data);
            if (data.id) {
                const stripe = Stripe('{{ stripe_publishable_key }}');
                stripe.redirectToCheckout({ sessionId: data.id });
                console.log(data.id, stripe);
            } else {
                alert('Error: ' + data.error);
            }
        });
    </script>
</body>
</html>
